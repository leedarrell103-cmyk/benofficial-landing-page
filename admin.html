<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Benofficial Admin Panel - Cloud Edition</title>
<style>
    :root {
        --dark: #0a0a0a;
        --gold: #cfa62c;
        --emerald: #0f9d58;
        --gray: #f5f5f5;
        --danger: #dc3545;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        background: #111;
        color: #fff;
        line-height: 1.6;
    }

    /* Setup Screen */
    .setup-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
    }
    .setup-box {
        background: #1a1a1a;
        padding: 2rem;
        border-radius: 8px;
        max-width: 600px;
        width: 100%;
        border: 1px solid var(--gold);
    }
    .setup-box h1 {
        color: var(--gold);
        margin-bottom: 1rem;
    }
    .setup-box p {
        margin-bottom: 1rem;
        color: #ccc;
    }
    .code-block {
        background: #0a0a0a;
        padding: 1rem;
        border-radius: 4px;
        border: 1px solid #333;
        margin: 1rem 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        overflow-x: auto;
    }
    .step {
        background: #0a0a0a;
        padding: 1rem;
        border-left: 3px solid var(--gold);
        margin: 1rem 0;
    }
    .step h3 {
        color: var(--gold);
        margin-bottom: 0.5rem;
    }

    /* Login Screen */
    .login-container {
        display: none;
        min-height: 100vh;
        align-items: center;
        justify-content: center;
        padding: 1rem;
    }
    .login-box {
        background: #1a1a1a;
        padding: 2rem;
        border-radius: 8px;
        max-width: 400px;
        width: 100%;
        border: 1px solid #333;
    }
    .login-box h1 {
        color: var(--gold);
        margin-bottom: 1.5rem;
        text-align: center;
    }

    /* Admin Dashboard */
    .admin-container {
        display: none;
        min-height: 100vh;
    }
    .admin-header {
        background: #1a1a1a;
        padding: 1rem 2rem;
        border-bottom: 2px solid var(--gold);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }
    .admin-header h1 {
        color: var(--gold);
        font-size: 1.5rem;
    }
    .status-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }
    .status-connected {
        background: rgba(15, 157, 88, 0.2);
        color: var(--emerald);
        border: 1px solid var(--emerald);
    }
    .admin-content {
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    /* Forms */
    .form-group {
        margin-bottom: 1.5rem;
    }
    label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--gold);
        font-weight: 600;
    }
    input[type="text"],
    input[type="password"],
    input[type="email"],
    input[type="url"],
    input[type="number"],
    textarea {
        width: 100%;
        padding: 0.75rem;
        background: #1a1a1a;
        border: 1px solid #333;
        border-radius: 4px;
        color: #fff;
        font-size: 1rem;
    }
    textarea {
        min-height: 100px;
        resize: vertical;
    }
    input:focus, textarea:focus {
        outline: none;
        border-color: var(--gold);
    }

    /* Buttons */
    .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
        display: inline-block;
        font-size: 1rem;
    }
    .btn-primary {
        background: var(--gold);
        color: #111;
    }
    .btn-primary:hover {
        background: #e5b93c;
        transform: translateY(-2px);
    }
    .btn-danger {
        background: var(--danger);
        color: #fff;
    }
    .btn-danger:hover {
        background: #c82333;
    }
    .btn-success {
        background: var(--emerald);
        color: #fff;
    }

    /* Sections */
    .admin-section {
        background: #1a1a1a;
        padding: 2rem;
        border-radius: 8px;
        margin-bottom: 2rem;
        border: 1px solid #333;
    }
    .admin-section h2 {
        color: var(--gold);
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #333;
    }

    /* Product List */
    .product-item {
        background: #0a0a0a;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1rem;
        border: 1px solid #333;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }
    .product-info h3 {
        color: var(--gold);
        margin-bottom: 0.25rem;
    }
    .product-price {
        color: var(--emerald);
        font-weight: 600;
    }

    /* Tabs */
    .tab-container {
        display: flex;
        gap: 0;
        margin-bottom: 2rem;
        border-bottom: 2px solid #333;
        overflow-x: auto;
    }
    .tab {
        padding: 1rem 1.5rem;
        cursor: pointer;
        background: transparent;
        border: none;
        color: #999;
        font-weight: 600;
        transition: all 0.3s;
        white-space: nowrap;
    }
    .tab.active {
        color: var(--gold);
        border-bottom: 3px solid var(--gold);
    }
    .tab-content {
        display: none;
    }
    .tab-content.active {
        display: block;
    }

    /* Alert */
    .alert {
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1rem;
    }
    .alert-success {
        background: rgba(15, 157, 88, 0.2);
        border: 1px solid var(--emerald);
        color: var(--emerald);
    }
    .alert-info {
        background: rgba(207, 166, 44, 0.2);
        border: 1px solid var(--gold);
        color: var(--gold);
    }

    .loading {
        text-align: center;
        padding: 2rem;
        color: var(--gold);
    }

    @media (max-width: 768px) {
        .admin-header {
            flex-direction: column;
        }
        .product-item {
            flex-direction: column;
            align-items: flex-start;
        }
        .tab {
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
        }
    }
</style>
</head>
<body>

<!-- Setup Instructions -->
<div class="setup-container" id="setupScreen">
    <div class="setup-box">
        <h1>üî• Firebase Setup - 5 Minutes to Glory</h1>

        <p><strong>Real Talk:</strong> You need a Firebase account (it's FREE). Here's the play:</p>

        <div class="step">
            <h3>Step 1: Create Firebase Project</h3>
            <p>1. Go to <a href="https://console.firebase.google.com" target="_blank" style="color: var(--gold);">console.firebase.google.com</a></p>
            <p>2. Click "Add Project" or "Create a project"</p>
            <p>3. Name it: <strong>benofficial-store</strong></p>
            <p>4. Disable Google Analytics (optional, you can enable later)</p>
            <p>5. Click "Create Project"</p>
        </div>

        <div class="step">
            <h3>Step 2: Get Your Config</h3>
            <p>1. In your Firebase project, click the ‚öôÔ∏è gear icon ‚Üí "Project settings"</p>
            <p>2. Scroll down to "Your apps" ‚Üí Click the "</>" web icon</p>
            <p>3. Register app name: <strong>benofficial-admin</strong></p>
            <p>4. Copy the <strong>firebaseConfig</strong> object</p>
        </div>

        <div class="step">
            <h3>Step 3: Enable Firestore Database</h3>
            <p>1. In Firebase console, click "Firestore Database" in left menu</p>
            <p>2. Click "Create database"</p>
            <p>3. Choose "Start in <strong>test mode</strong>" (we'll secure it later)</p>
            <p>4. Choose a location (pick closest to you)</p>
        </div>

        <div class="step">
            <h3>Step 4: Paste Your Config Below</h3>
            <p>Copy the entire firebaseConfig object from Firebase console:</p>

            <div class="form-group">
                <label>API Key</label>
                <input type="text" id="apiKey" placeholder="AIza...">
            </div>
            <div class="form-group">
                <label>Auth Domain</label>
                <input type="text" id="authDomain" placeholder="your-project.firebaseapp.com">
            </div>
            <div class="form-group">
                <label>Project ID</label>
                <input type="text" id="projectId" placeholder="your-project-id">
            </div>
            <div class="form-group">
                <label>Storage Bucket</label>
                <input type="text" id="storageBucket" placeholder="your-project.appspot.com">
            </div>
            <div class="form-group">
                <label>Messaging Sender ID</label>
                <input type="text" id="messagingSenderId" placeholder="123456789">
            </div>
            <div class="form-group">
                <label>App ID</label>
                <input type="text" id="appId" placeholder="1:123:web:abc">
            </div>

            <button class="btn btn-primary" onclick="saveFirebaseConfig()" style="width: 100%;">
                üöÄ Save & Initialize Firebase
            </button>
        </div>

        <p style="margin-top: 1rem; font-size: 0.9rem; color: #999;">
            <strong>Translation:</strong> This connects your admin panel to the cloud. One-time setup, forever benefits. üí∞
        </p>
    </div>
</div>

<!-- Login Screen -->
<div class="login-container" id="loginScreen">
    <div class="login-box">
        <h1>üîê Admin Login</h1>
        <form id="loginForm">
            <div class="form-group">
                <label>Username</label>
                <input type="text" id="username" placeholder="Enter username" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="password" placeholder="Enter password" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
        </form>
        <p style="margin-top: 1rem; text-align: center; color: #999; font-size: 0.9rem;">
            Default: admin / benofficial2024
        </p>
    </div>
</div>

<!-- Admin Dashboard -->
<div class="admin-container" id="adminDashboard">
    <div class="admin-header">
        <div>
            <h1>‚ö° Benofficial Admin Panel</h1>
            <span class="status-badge status-connected" id="statusBadge">
                ‚òÅÔ∏è Connected to Cloud
            </span>
        </div>
        <button class="btn btn-danger" onclick="logout()">Logout</button>
    </div>

    <div class="admin-content">
        <div id="successAlert" class="alert alert-success" style="display: none;">
            ‚úÖ Changes saved to cloud!
        </div>

        <div id="loadingIndicator" class="loading">
            Loading data from cloud...
        </div>

        <div id="mainContent" style="display: none;">
            <!-- Tabs -->
            <div class="tab-container">
                <button class="tab active" onclick="switchTab('hero')">Hero Section</button>
                <button class="tab" onclick="switchTab('products')">Digital Products</button>
                <button class="tab" onclick="switchTab('affiliate')">Affiliate Products</button>
                <button class="tab" onclick="switchTab('about')">About/Story</button>
            </div>

            <!-- Hero Section Tab -->
            <div id="hero" class="tab-content active">
                <div class="admin-section">
                    <h2>Hero Section</h2>
                    <form id="heroForm">
                        <div class="form-group">
                            <label>Main Headline</label>
                            <input type="text" id="heroHeadline" placeholder="Your powerful headline">
                        </div>
                        <div class="form-group">
                            <label>Subheadline</label>
                            <textarea id="heroSubheadline" placeholder="Supporting text..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>CTA Button Text</label>
                            <input type="text" id="heroCTA" placeholder="e.g., Shop Now">
                        </div>
                        <div class="form-group">
                            <label>CTA Button Link</label>
                            <input type="url" id="heroCTALink" placeholder="https://...">
                        </div>
                        <button type="submit" class="btn btn-primary">üíæ Save to Cloud</button>
                    </form>
                </div>
            </div>

            <!-- Digital Products Tab -->
            <div id="products" class="tab-content">
                <div class="admin-section">
                    <h2>Digital Products</h2>
                    <div id="productsList"></div>
                    <button class="btn btn-success" onclick="addProduct()">+ Add New Product</button>
                </div>
            </div>

            <!-- Affiliate Products Tab -->
            <div id="affiliate" class="tab-content">
                <div class="admin-section">
                    <h2>Affiliate Products</h2>
                    <div id="affiliateList"></div>
                    <button class="btn btn-success" onclick="addAffiliate()">+ Add New Affiliate</button>
                </div>
            </div>

            <!-- About Tab -->
            <div id="about" class="tab-content">
                <div class="admin-section">
                    <h2>About / Origin Story</h2>
                    <form id="aboutForm">
                        <div class="form-group">
                            <label>Section Title</label>
                            <input type="text" id="aboutTitle" placeholder="e.g., The Origin">
                        </div>
                        <div class="form-group">
                            <label>Your Story (Use your brand voice!)</label>
                            <textarea id="aboutStory" rows="8" placeholder="Write your story here..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">üíæ Save to Cloud</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
// Configuration
const CREDENTIALS = {
    username: 'admin',
    password: 'benofficial2024'
};

let db = null;
let firebaseInitialized = false;

// Check if Firebase is configured
function checkFirebaseConfig() {
    const config = localStorage.getItem('firebaseConfig');
    if (!config) {
        document.getElementById('setupScreen').style.display = 'flex';
        return false;
    }

    try {
        const firebaseConfig = JSON.parse(config);
        firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();
        firebaseInitialized = true;

        document.getElementById('setupScreen').style.display = 'none';
        document.getElementById('loginScreen').style.display = 'flex';
        return true;
    } catch (error) {
        console.error('Firebase init error:', error);
        alert('Error initializing Firebase. Please check your configuration.');
        document.getElementById('setupScreen').style.display = 'flex';
        return false;
    }
}

// Save Firebase configuration
function saveFirebaseConfig() {
    const config = {
        apiKey: document.getElementById('apiKey').value.trim(),
        authDomain: document.getElementById('authDomain').value.trim(),
        projectId: document.getElementById('projectId').value.trim(),
        storageBucket: document.getElementById('storageBucket').value.trim(),
        messagingSenderId: document.getElementById('messagingSenderId').value.trim(),
        appId: document.getElementById('appId').value.trim()
    };

    // Validate
    if (!config.apiKey || !config.projectId || !config.appId) {
        alert('Please fill in at least API Key, Project ID, and App ID');
        return;
    }

    localStorage.setItem('firebaseConfig', JSON.stringify(config));
    alert('‚úÖ Firebase configured! Refreshing page...');
    location.reload();
}

// Initialize on page load
checkFirebaseConfig();

// Login
document.getElementById('loginForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    if (username === CREDENTIALS.username && password === CREDENTIALS.password) {
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('adminDashboard').style.display = 'block';
        loadDataFromFirebase();
    } else {
        alert('Invalid credentials!');
    }
});

// Logout
function logout() {
    document.getElementById('loginScreen').style.display = 'flex';
    document.getElementById('adminDashboard').style.display = 'none';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
}

// Load data from Firebase
async function loadDataFromFirebase() {
    if (!firebaseInitialized) return;

    document.getElementById('loadingIndicator').style.display = 'block';
    document.getElementById('mainContent').style.display = 'none';

    try {
        // Load hero section
        const heroDoc = await db.collection('content').doc('hero').get();
        if (heroDoc.exists) {
            const data = heroDoc.data();
            document.getElementById('heroHeadline').value = data.headline || '';
            document.getElementById('heroSubheadline').value = data.subheadline || '';
            document.getElementById('heroCTA').value = data.cta || '';
            document.getElementById('heroCTALink').value = data.ctaLink || '';
        }

        // Load about section
        const aboutDoc = await db.collection('content').doc('about').get();
        if (aboutDoc.exists) {
            const data = aboutDoc.data();
            document.getElementById('aboutTitle').value = data.title || '';
            document.getElementById('aboutStory').value = data.story || '';
        }

        // Load products
        const productsSnapshot = await db.collection('products').get();
        window.productsData = [];
        productsSnapshot.forEach(doc => {
            window.productsData.push({ id: doc.id, ...doc.data() });
        });
        renderProducts();

        // Load affiliates
        const affiliatesSnapshot = await db.collection('affiliates').get();
        window.affiliatesData = [];
        affiliatesSnapshot.forEach(doc => {
            window.affiliatesData.push({ id: doc.id, ...doc.data() });
        });
        renderAffiliates();

        document.getElementById('loadingIndicator').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
    } catch (error) {
        console.error('Error loading data:', error);
        alert('Error loading data from Firebase: ' + error.message);
    }
}

// Show success alert
function showAlert() {
    const alert = document.getElementById('successAlert');
    alert.style.display = 'block';
    setTimeout(() => {
        alert.style.display = 'none';
    }, 3000);
}

// Tab switching
function switchTab(tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById(tabName).classList.add('active');
}

// Hero form
document.getElementById('heroForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const data = {
        headline: document.getElementById('heroHeadline').value,
        subheadline: document.getElementById('heroSubheadline').value,
        cta: document.getElementById('heroCTA').value,
        ctaLink: document.getElementById('heroCTALink').value
    };

    try {
        await db.collection('content').doc('hero').set(data);
        showAlert();
    } catch (error) {
        alert('Error saving: ' + error.message);
    }
});

// About form
document.getElementById('aboutForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const data = {
        title: document.getElementById('aboutTitle').value,
        story: document.getElementById('aboutStory').value
    };

    try {
        await db.collection('content').doc('about').set(data);
        showAlert();
    } catch (error) {
        alert('Error saving: ' + error.message);
    }
});

// Products functions
window.productsData = [];

function renderProducts() {
    const list = document.getElementById('productsList');
    list.innerHTML = window.productsData.map((p, i) => `
        <div class="product-item">
            <div class="product-info">
                <h3>${p.name}</h3>
                <p class="product-price">$${p.price}</p>
                <p style="color: #999; font-size: 0.9rem;">${p.description || ''}</p>
            </div>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="editProduct('${p.id}')">Edit</button>
                <button class="btn btn-danger" onclick="deleteProduct('${p.id}')">Delete</button>
            </div>
        </div>
    `).join('');
}

async function addProduct() {
    const name = prompt('Product Name:');
    if (!name) return;
    const price = prompt('Product Price (numbers only):');
    if (!price) return;
    const description = prompt('Product Description:');
    const link = prompt('Product Link/URL:');

    try {
        await db.collection('products').add({ name, price, description, link });
        await loadDataFromFirebase();
        showAlert();
    } catch (error) {
        alert('Error adding product: ' + error.message);
    }
}

async function editProduct(id) {
    const product = window.productsData.find(p => p.id === id);
    if (!product) return;

    const name = prompt('Product Name:', product.name);
    if (name === null) return;
    const price = prompt('Product Price:', product.price);
    if (price === null) return;
    const description = prompt('Product Description:', product.description);
    const link = prompt('Product Link:', product.link);

    try {
        await db.collection('products').doc(id).update({
            name: name || product.name,
            price: price || product.price,
            description: description !== null ? description : product.description,
            link: link !== null ? link : product.link
        });
        await loadDataFromFirebase();
        showAlert();
    } catch (error) {
        alert('Error updating product: ' + error.message);
    }
}

async function deleteProduct(id) {
    if (!confirm('Delete this product?')) return;

    try {
        await db.collection('products').doc(id);
        await loadDataFromFirebase();
        showAlert();
    } catch (error) {
        alert('Error deleting product: ' + error.message);
    }
}

// Affiliates functions
window.affiliatesData = [];

function renderAffiliates() {
    const list = document.getElementById('affiliateList');
    list.innerHTML = window.affiliatesData.map((a, i) => `
        <div class="product-item">
            <div class="product-info">
                <h3>${a.name}</h3>
                <p class="product-price">Commission: ${a.commission}</p>
                <p style="color: #999; font-size: 0.9rem;">${a.description || ''}</p>
            </div>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="editAffiliate('${a.id}')">Edit</button>
                <button class="btn btn-danger" onclick="deleteAffiliate('${a.id}')">Delete</button>
            </div>
        </div>
    `).join('');
}

async function addAffiliate() {
    const name = prompt('Affiliate Product Name:');
    if (!name) return;
    const commission = prompt('Commission Rate (e.g., 20%):');
    if (!commission) return;
    const description = prompt('Product Description:');
    const link = prompt('Affiliate Link:');

    try {
        await db.collection('affiliates').add({ name, commission, description, link });
        await loadDataFromFirebase();
        showAlert();
    } catch (error) {
        alert('Error adding affiliate: ' + error.message);
    }
}

async function editAffiliate(id) {
    const affiliate = window.affiliatesData.find(a => a.id === id);
    if (!affiliate) return;

    const name = prompt('Affiliate Product Name:', affiliate.name);
    if (name === null) return;
    const commission = prompt('Commission Rate:', affiliate.commission);
    if (commission === null) return;
    const description = prompt('Product Description:', affiliate.description);
    const link = prompt('Affiliate Link:', affiliate.link);

    try {
        await db.collection('affiliates').doc(id).update({
            name: name || affiliate.name,
            commission: commission || affiliate.commission,
            description: description !== null ? description : affiliate.description,
            link: link !== null ? link : affiliate.link
        });
        await loadDataFromFirebase();
        showAlert();
    } catch (error) {
        alert('Error updating affiliate: ' + error.message);
    }
}

async function deleteAffiliate(id) {
    if (!confirm('Delete this affiliate product?')) return;

    try {
        await db.collection('affiliates').doc(id).delete();
        await loadDataFromFirebase();
        showAlert();
    } catch (error) {
        alert('Error deleting affiliate: ' + error.message);
    }
}
</script>

</body>
</html>